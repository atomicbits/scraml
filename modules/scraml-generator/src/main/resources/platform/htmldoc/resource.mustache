<div class="panel panel-white resource-modal">

    <div class="panel-heading">
        <h4 class="panel-title">
            <a>
                {{url}}
            </a>

            <span class="methods">
            {{#actions}}
            <a  data-toggle="collapse" href="#{{uniqueId}}_{{actionType.action}}"><!-- modal shown by hashchange event -->
              <span class="badge badge_{{actionType.action}}">{{actionType.action}}</span>
            </a>
            {{/actions}}
        </span>
        </h4>
    </div>


    {{#description}}
    <div id="panel_{{uniqueId}}">
        <div class="panel-body">
            <div class="resource-description">
                {{description}}
            </div>
        </div>
    </div>
    {{/description}}

    {{#actions}}
    <div class="panel panel-default panel-collapse collapse" id="{{uniqueId}}_{{actionType.action}}">

        <div>
            <span class="badge badge_{{actionType.action}}">{{actionType.action}}</span>

            {{#description}}
            <div class="alert alert-info method_description">
                {{description}}
            </div>
            {{/description}}

            <div class="clearfix"></div>
        </div>

        <div class="panel-body">

            <!-- Nav tabs -->
            <ul class="nav nav-tabs">

                <!--method request tab-->
                <li class="active">
                    <a href="#{{uniqueId}}_{{actionType.action}}_request" data-toggle="tab">Request</a>
                </li>

                <!--method response tab-->
                <li>
                    <a href="#{{uniqueId}}_{{actionType.action}}_response" data-toggle="tab">Response</a>
                </li>

            </ul>

            <!-- Tab panes -->
            <div class="tab-content">

                <!--method requests-->
                <div class="tab-pane active" id="{{uniqueId}}_{{actionType.action}}_request">
                    {% if resource.allUriParameters.length %}
                    <h3>URI Parameters</h3>
                    <ul>
                        {% for item in resource.allUriParameters %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {% if method.annotations.length %}
                    <h3>Annotations</h3>
                    <ul>
                        {% for item in method.annotations %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {% if method.headers.length %}
                    <h3>Headers</h3>
                    <ul>
                        {% for item in method.headers %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {% if method.queryString and method.queryString.properties.length %}
                    <h3>Query String</h3>
                    <ul>
                        {% for item in method.queryString.properties %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {% if method.queryParameters.length %}
                    <h3>Query Parameters</h3>
                    <ul>
                        {% for item in method.queryParameters %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {% if method.body %}
                    <h3>Body</h3>
                    {% for b in method.body %}
                    <p><strong>Media type</strong>: {{ b.key }}</p>

                    {% if b.type %}
                    {% if isStandardType(b.type) %}
                    {% if b.type === 'array' and b.items %}
                    <p><strong>Type</strong>: array of {{ b.items.originalType | d(b.items.type) | d(b.items) }}</p>
                    {% elif b.type === 'union' and b.anyOf.length %}
                    <p><strong>Possible types</strong>:
                        <ul>
                            {% for super in b.anyOf %}
                            <li>
                    <p><strong>{{ super.displayName }}</strong></p>
                    <div class="items">
                        <ul>
                            {% for item in super.properties %}
                            {% include "./item.nunjucks" %}
                            {% endfor %}
                        </ul>
                    </div>
                    </li>
                    {% endfor %}
                    </ul>
                    </p>
                    {% else %}
                    <p><strong>Type</strong>: {{ b.type }}</p>
                    {% endif %}
                    {% else %}
                    <p><strong>Type</strong>:</p>
                    <pre><code>{{ b.type | escape }}</code></pre>
                    {% endif %}
                    {% endif %}

                    {% if b.content %}
                    <p><strong>Content</strong>:</p>
                    <pre><code>{{ b.content | escape }}</code></pre>
                    {% endif %}

                    {% if b.items and b.items.properties %}
                    {% if isStandardType(b.items) %}
                    <p><strong>Items</strong>: {{ b.items }}</p>
                    {% endif %}

                    {% if not isStandardType(b.items) %}
                    <p><strong>Items</strong>: {{ b.items.displayName }}</p>

                    {% if b.items.properties or b.items.examples.length %}
                    <div class="items">
                        {% if b.items.properties %}
                        <ul>
                            {% for item in b.items.properties %}
                            {% include "./item.nunjucks" %}
                            {% endfor %}
                        </ul>
                        {% endif %}

                        {# Request - Array item examples #}
                        {% set parent = b.items %}
                        {% include "./examples.nunjucks" %}
                    </div>
                    {% endif %}
                    {% endif %}
                    {% endif %}

                    {% if b.properties.length %}
                    <strong>Properties</strong>
                    <ul>
                        {% for item in b.properties %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {# Request - Body examples #}
                    {% set parent = b %}
                    {% include "./examples.nunjucks" %}
                    {% endfor %}
                    {% endif %}
                </div>

                <!--method responses-->
                <div class="tab-pane active" id="{{uniqueId}}_{{actionType.action}}_response">
                    {% for response in method.responses %}
                    <h2>HTTP status code <a href="http://httpstatus.es/{{ response.code }}" target="_blank">{{ response.code }}</a></h2>
                    {% markdown %}
                    {{ response.description }}
                    {% endmarkdown %}

                    {% if response.headers.length %}
                    <h3>Headers</h3>
                    <ul>
                        {% for item in response.headers %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {% if response.body.length %}
                    <h3>Body</h3>
                    {% for b in response.body %}
                    <p><strong>Media type</strong>: {{ b.key }}</p>

                    {% if b.type %}
                    {% if isStandardType(b.type) %}
                    {% if b.type === 'array' and b.items %}
                    <p><strong>Type</strong>: array of {{ b.items.originalType | d(b.items.type) | d(b.items) }}</p>
                    {% elif b.type === 'union' and b.anyOf.length %}
                    <p><strong>Possible types</strong>:
                        <ul>
                            {% for super in b.anyOf %}
                            <li>
                    <p><strong>{{ super.displayName }}</strong></p>
                    <div class="items">
                        <ul>
                            {% for item in super.properties %}
                            {% include "./item.nunjucks" %}
                            {% endfor %}
                        </ul>
                    </div>
                    </li>
                    {% endfor %}
                    </ul>
                    </p>
                    {% else %}
                    <p><strong>Type</strong>: {{ b.type }}</p>
                    {% endif %}
                    {% else %}
                    <p><strong>Type</strong>:</p>
                    <pre><code>{{ b.type | escape }}</code></pre>
                    {% endif %}
                    {% endif %}

                    {% if b.content %}
                    <p><strong>Content</strong>:</p>
                    <pre><code>{{ b.content | escape }}</code></pre>
                    {% endif %}

                    {% if b.items and b.items.properties %}
                    {% if isStandardType(b.items) %}
                    <p><strong>Items</strong>: {{ b.items }}</p>
                    {% endif %}

                    {% if not isStandardType(b.items) %}
                    <p><strong>Items</strong>: {{ b.items.displayName }}</p>

                    {% if b.items.properties or b.items.examples.length %}
                    <div class="items">
                        {% if b.items.properties %}
                        <ul>
                            {% for item in b.items.properties %}
                            {% include "./item.nunjucks" %}
                            {% endfor %}
                        </ul>
                        {% endif %}

                        {# Response - Array item examples #}
                        {% set parent = b.items.examples %}
                        {% include "./examples.nunjucks" %}
                    </div>
                    {% endif %}
                    {% endif %}
                    {% endif %}

                    {% if b.properties.length %}
                    <strong>Properties</strong>
                    <ul>
                        {% for item in b.properties %}
                        {% include "./item.nunjucks" %}
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {# Response - Body examples #}
                    {% set parent = b %}
                    {% include "./examples.nunjucks" %}
                    {% endfor %}
                    {% endif %}
                    {% endfor %}
                </div>


            </div>

        </div>
    </div>
    {{/actions}}


</div>